## HEAD
- time : 2024-10-5
- author : young
- abstract : 代入项时没有生成副本，而是原地操作，导致被代入的项(如conclusion)被修改
## 背景
代入/替换是公理系统的重要操作，它是定理/规则的外延，也是等值的外延，也就是说定理的普适性，等值的相等性，都通过代入/替换来实现和表现。  

在具体实现上，是用一棵树替换树的子树实现的。不过，是否需要原地操作不是一定的，有时可能需要原地，有时可能无所谓，因为旧的不需要了，但是原地相对要高效些，有时可能要副本。

## 问题
旧的项还需要被查看和使用，不应该被修改。[Converter](..\semantic\line.py)没有提供明确的接口确定是否原地操作。
同样的问题是需不需要拷贝代入的项。

## 影响


## 可能的解

### 先生成副本
使用 `tree.copy` 和 `utils.comcopy.basiccopy` 先拷贝语法树，然后在副本上进行修改。
#### 时机
那么什么时候生成副本呢?
1. Converter不生成副本，用的时候决定
2. Converter提供生成副本的选项，决定是否生成abt以及其他参数的副本。有一个问题是参数有好几个，相应选项也有好几个。

还是2好些

### 影响
需要修改 Converter,反正要进行模块化，不如新建一个文件TermConverter，旧的等新版本稳定后再删除。

